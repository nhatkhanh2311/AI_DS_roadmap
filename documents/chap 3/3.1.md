# Giai ฤoแบกn 3: Thu thแบญp vร Quแบฃn lรฝ Dแปฏ liแปu
## Bรi 3.1: SQL (Phแบงn 1) - Truy vแบฅn & Lแปc Dแปฏ liแปu

### **๐ฏ Mแปฅc tiรชu bรi hแปc:**
1.  Hiแปu vai trรฒ cแปงa PostgreSQL nhฦฐ mแปt hแป quแบฃn trแป CSDL Client-Server.
2.  Sแปญ dแปฅng DataGrip ฤแป tฦฐฦกng tรกc vแปi CSDL PostgreSQL cแปงa bแบกn.
3.  Nแบฏm vแปฏng cรบ phรกp cแปงa cรกc cรขu lแปnh truy vแบฅn cแปt lรตi: **`SELECT`**, **`FROM`**, **`WHERE`**.
4.  Lแปc dแปฏ liแปu bแบฑng cรกc toรกn tแปญ vร sแบฏp xแบฟp, giแปi hแบกn kแบฟt quแบฃ trแบฃ vแป.

---

### **1. Mรดi trฦฐแปng Lรm viแปc: PostgreSQL + DataGrip**

Chรบng ta ฤรฃ thiแบฟt lแบญp mแปt mรดi trฦฐแปng chuyรชn nghiแปp:
* **PostgreSQL Server:** Lร "trรกi tim", mแปt chฦฐฦกng trรฌnh chแบกy nแปn trรชn mรกy tรญnh cแปงa bแบกn, cรณ nhiแปm vแปฅ lฦฐu trแปฏ vร quแบฃn lรฝ toรn bแป dแปฏ liแปu.
* **DataGrip:** Lร "bแป ฤiแปu khiแปn" cแปงa bแบกn. Nรณ lร mแปt client, mแปt cรดng cแปฅ ฤแป hแปa giรบp bแบกn gแปญi cรกc cรขu lแปnh SQL ฤแบฟn server vร nhแบญn lแบกi kแบฟt quแบฃ mแปt cรกch trแปฑc quan.

**Analogy:** Hรฃy coi PostgreSQL Server lร mแปt nhร kho dแปฏ liแปu khแปng lแป. DataGrip lร chiแบฟc mรกy tรญnh bแบฃng bแบกn cแบงm trรชn tay ฤแป gแปญi yรชu cแบงu ฤแบฟn ngฦฐแปi quแบฃn kho. **SQL** chรญnh lร ngรดn ngแปฏ bแบกn gรต vรo mรกy tรญnh bแบฃng ฤรณ.

---

### **2. Chuแบฉn bแป Dแปฏ liแปu trong DataGrip**

Trฦฐแปc khi thแปฑc hรnh, chรบng ta cแบงn tแบกo bแบฃng vร dแปฏ liแปu.

* **Bฦฐแปc 1: Mแป Console:** Trong DataGrip, hรฃy ฤแบฃm bแบฃo bแบกn ฤang mแป mแปt cแปญa sแป truy vแบฅn mแปi (Query Console) kแบฟt nแปi ฤแบฟn CSDL `postgres` cแปงa bแบกn.
* **Bฦฐแปc 2: Chแบกy Script Tแบกo Bแบฃng:** Sao chรฉp toรn bแป ฤoแบกn code dฦฐแปi ฤรขy, dรกn vรo console vร chแบกy nรณ (nhแบฅn nรบt "Execute" hรฌnh tam giรกc mรu xanh).

        -- Xรณa bแบฃng nแบฟu nรณ ฤรฃ tแปn tแบกi ฤแป trรกnh lแปi khi chแบกy lแบกi
        DROP TABLE IF EXISTS Employees;

        -- Tแบกo bแบฃng Employees
        CREATE TABLE Employees (
            ID INT PRIMARY KEY,
            Name VARCHAR(100),
            Department VARCHAR(50),
            Salary INT,
            HireDate DATE
        );

        -- Chรจn dแปฏ liแปu mแบซu
        INSERT INTO Employees (ID, Name, Department, Salary, HireDate) VALUES
        (1, 'John Smith', 'Sales', 60000, '2022-01-15'),
        (2, 'Jane Doe', 'Marketing', 75000, '2021-09-20'),
        (3, 'Peter Jones', 'Sales', 55000, '2022-03-10'),
        (4, 'Mary Johnson', 'HR', 80000, '2020-11-05'),
        (5, 'James Brown', 'IT', 95000, '2021-05-30'),
        (6, 'Patricia Williams', 'IT', 105000, '2022-08-21'),
        (7, 'Robert Davis', 'Marketing', 72000, '2023-01-18');

* **Bฦฐแปc 3: Kiแปm tra:** Sau khi chแบกy, bแบกn cรณ thแป lรm mแปi (refresh) schema แป thanh bรชn trรกi cแปงa DataGrip vร sแบฝ thแบฅy bแบฃng `employees` xuแบฅt hiแปn.

---

### **3. Cรกc Cรขu lแปnh SQL Cฦก bแบฃn**

Bรขy giแป, hรฃy xรณa ฤoแบกn code trรชn vร bแบฏt ฤแบงu viแบฟt cรกc cรขu truy vแบฅn cแปงa riรชng bแบกn trong console.

#### **a. `SELECT` vร `FROM`**
* **`SELECT *`**: Lแบฅy **tแบฅt cแบฃ cรกc cแปt**.
* **`SELECT ten_cot1, ten_cot2`**: Chแป lแบฅy cรกc cแปt cแปฅ thแป.
* **`FROM Employees`**: Chแป ฤแปnh rแบฑng chรบng ta ฤang lรm viแปc trรชn bแบฃng `Employees`.

        -- Vรญ dแปฅ: Lแบฅy tแบฅt cแบฃ thรดng tin tแปซ bแบฃng Employees
        SELECT * FROM Employees;

        -- Vรญ dแปฅ: Chแป lแบฅy tรชn vร lฦฐฦกng
        SELECT Name, Salary FROM Employees;

#### **b. Lแปc hรng vแปi `WHERE`**
Mแปnh ฤแป `WHERE` ฤฦฐแปฃc ฤแบทt sau `FROM` ฤแป lแปc ra nhแปฏng hรng thแปa mรฃn ฤiแปu kiแปn.

        -- Lแบฅy tแบฅt cแบฃ thรดng tin cแปงa nhรขn viรชn thuแปc phรฒng 'Sales'
        SELECT * FROM Employees
        WHERE Department = 'Sales';

        -- Lแบฅy nhรขn viรชn phรฒng IT cรณ lฦฐฦกng trรชn 100000
        SELECT * FROM Employees
        WHERE Department = 'IT' AND Salary > 100000;

#### **c. Sแบฏp xแบฟp vแปi `ORDER BY` vร Giแปi hแบกn vแปi `LIMIT`**
* **`ORDER BY ten_cot DESC`**: Sแบฏp xแบฟp giแบฃm dแบงn.
* **`ORDER BY ten_cot ASC`**: Sแบฏp xแบฟp tฤng dแบงn (mแบทc ฤแปnh).
* **`LIMIT so_luong`**: Chแป lแบฅy `so_luong` hรng ฤแบงu tiรชn.

        -- Tรฌm 3 nhรขn viรชn cรณ lฦฐฦกng cao nhแบฅt
        SELECT Name, Salary
        FROM Employees
        ORDER BY Salary DESC
        LIMIT 3;

---

### **โ๏ธ Bรi thแปฑc hรnh:**

Hรฃy viแบฟt vร chแบกy cรกc cรขu lแปnh SQL trong **DataGrip** ฤแป trแบฃ lแปi nhแปฏng cรขu hแปi sau:

1.  Lแบฅy ra **tรชn** vร **lฦฐฦกng** cแปงa tแบฅt cแบฃ nhรขn viรชn thuแปc phรฒng **'IT'**.
2.  Lแบฅy ra **tแบฅt cแบฃ thรดng tin** cแปงa nhแปฏng nhรขn viรชn ฤฦฐแปฃc tuyแปn dแปฅng **sau ngรy '2022-01-01'**.
3.  Lแบฅy ra **tรชn** vร **ngรy tuyแปn dแปฅng** cแปงa nhแปฏng nhรขn viรชn cรณ mแปฉc lฦฐฦกng nแบฑm trong khoแบฃng tแปซ **70000 ฤแบฟn 85000**. **Gแปฃi รฝ:** dรนng toรกn tแปญ `BETWEEN`.
4.  Lแบฅy ra thรดng tin cแปงa 3 nhรขn viรชn ฤฦฐแปฃc tuyแปn dแปฅng gแบงn ฤรขy nhแบฅt (dแปฑa vรo `HireDate`).