# Giai đoạn 1: Nền đảng Python & Lập trình
## Bài 1.2: Môi trường ảo & Quản lý Gói (Virtual Environments & Pip)

### **🎯 Mục tiêu bài học:**
1.  Hiểu tại sao cần phải sử dụng môi trường ảo trong các dự án Python.
2.  Học cách tạo và quản lý một môi trường ảo bằng `venv`.
3.  Sử dụng `pip` để cài đặt và quản lý các thư viện bên ngoài.
4.  Biết cách tạo file `requirements.txt` để đảm bảo tính tái lập của dự án.

---

### **1. Vấn đề: Tại sao cần Môi trường ảo? 🤔**

Hãy tưởng tượng bạn đang làm hai dự án:
* **Dự án A (cũ):** Cần sử dụng thư viện `Pandas` phiên bản **1.5**.
* **Dự án B (mới):** Cần sử dụng thư viện `Pandas` phiên bản **2.2** mới nhất.

Nếu bạn cài đặt thư viện vào hệ thống Python chung, bạn chỉ có thể có một phiên bản `Pandas` tại một thời điểm. Cài bản 2.2 sẽ làm hỏng dự án A, và ngược lại. Đây được gọi là **xung đột phụ thuộc (dependency conflict)**.

**Môi trường ảo (Virtual Environment)** giải quyết vấn đề này bằng cách tạo ra các "thư mục" Python riêng biệt, biệt lập cho từng dự án. Mỗi môi trường ảo có bản sao Python và các thư viện riêng, không ảnh hưởng đến nhau.

**Analogy:** Giống như việc bạn có các nhà bếp riêng cho từng dự án nấu ăn. Nhà bếp cho món Á có gia vị và dụng cụ riêng. Nhà bếp cho món Âu có gia vị và dụng cụ khác. Chúng hoàn toàn không ảnh hưởng lẫn nhau.

---

### **2. `venv`: Công cụ tích hợp sẵn**

`venv` là module tạo môi trường ảo được tích hợp sẵn trong Python (từ phiên bản 3.3 trở đi), chúng ta không cần cài đặt gì thêm.

#### **a. Tạo một Môi trường ảo**

1.  Mở Terminal và di chuyển đến thư mục dự án của bạn (ví dụ: `my_project`).
2.  Chạy lệnh sau:

        python -m venv venv

    * `python -m venv`: Gọi module `venv`.
    * `venv` (thứ hai): Là tên của thư mục môi trường ảo sẽ được tạo ra. Đây là tên theo quy ước phổ biến.
    
    Sau khi chạy, bạn sẽ thấy một thư mục mới tên là `venv` xuất hiện trong dự án của bạn.

#### **b. Kích hoạt (Activate) Môi trường ảo**

Sau khi tạo, bạn cần "kích hoạt" nó để bắt đầu sử dụng.

* **Trên Windows (Command Prompt/PowerShell):**

        .\venv\Scripts\activate

* **Trên macOS / Linux:**

        source venv/bin/activate

Sau khi kích hoạt, bạn sẽ thấy tên môi trường ảo `(venv)` xuất hiện ở đầu dòng lệnh của bạn. Điều này báo hiệu rằng mọi lệnh `python` hay `pip` bạn gõ từ bây giờ sẽ chỉ ảnh hưởng đến môi trường ảo này.

#### **c. Hủy kích hoạt (Deactivate)**

Khi làm việc xong, bạn chỉ cần gõ lệnh sau ở bất kỳ đâu:

    deactivate

---

### **3. `pip`: Trình quản lý Gói 📦**

`pip` là trình quản lý gói mặc định của Python. Nó cho phép bạn cài đặt, cập nhật, và gỡ bỏ các thư viện từ **Python Package Index (PyPI)** - kho lưu trữ thư viện khổng lồ của cộng đồng Python.

#### **a. Cài đặt một Gói**

Hãy chắc chắn rằng bạn đã **kích hoạt** môi trường ảo.

    # Cú pháp: pip install <tên_gói>
    pip install pandas

    # Cài đặt một phiên bản cụ thể
    pip install pandas==1.5.3

    # Cài đặt từ nhiều gói cùng lúc
    pip install numpy matplotlib

#### **b. Quản lý các Gói đã cài**

    # Liệt kê tất cả các gói đã cài trong môi trường ảo
    pip list

    # "Đóng băng" phiên bản của các gói và lưu vào file
    # Đây là một quy ước cực kỳ quan trọng!
    pip freeze > requirements.txt

File `requirements.txt` sẽ chứa danh sách tất cả các gói và phiên bản chính xác của chúng. Khi bạn chia sẻ dự án cho người khác, họ chỉ cần chạy lệnh `pip install -r requirements.txt` là có thể cài đặt lại đúng môi trường làm việc của bạn. Điều này đảm bảo **tính tái lập (reproducibility)** cho dự án.

---

### **✍️ Bài thực hành:**

1.  **Tạo dự án mới:** Tạo một thư mục mới trên máy tính của bạn tên là `project_alpha`.
2.  **Khởi tạo môi trường ảo:** Mở Terminal, di chuyển vào thư mục `project_alpha`, và tạo một môi trường ảo tên là `venv`.
3.  **Kích hoạt môi trường:** Sử dụng lệnh phù hợp với hệ điều hành của bạn để kích hoạt `venv`.
4.  **Cài đặt thư viện:** Dùng `pip` để cài đặt một thư viện bất kỳ mà bạn thấy thú vị, ví dụ:
    * `requests` (để làm việc với API web)
    * `numpy` (thư viện tính toán khoa học)
5.  **"Đóng băng" môi trường:** Chạy lệnh `pip freeze` để tạo ra file `requirements.txt`.
6.  **Kiểm tra:** Mở file `requirements.txt` và xem nội dung bên trong.
7.  **Dọn dẹp:** Hủy kích hoạt môi trường ảo bằng lệnh `deactivate`.