# Giai Ä‘oáº¡n 2: Ná»n táº£ng ToÃ¡n & Thá»‘ng kÃª
## BÃ i 2.9: Ná»n táº£ng Thá»‘ng kÃª Suy luáº­n (Inferential Statistics)

### **ğŸ¯ Má»¥c tiÃªu bÃ i há»c:**
1.  PhÃ¢n biá»‡t giá»¯a **Quáº§n thá»ƒ (Population)** vÃ  **Máº«u (Sample)**.
2.  Hiá»ƒu khÃ¡i niá»‡m cá»‘t lÃµi cá»§a **Kiá»ƒm Ä‘á»‹nh giáº£ thuyáº¿t (Hypothesis Testing)**.
3.  Náº¯m vá»¯ng Ã½ nghÄ©a vÃ  cÃ¡ch diá»…n giáº£i **p-value**.
4.  LÃ m quen vá»›i má»™t vÃ­ dá»¥ kiá»ƒm Ä‘á»‹nh thá»‘ng kÃª phá»• biáº¿n: **T-test**.

---

### **1. Quáº§n thá»ƒ vÃ  Máº«u**

* **Quáº§n thá»ƒ (Population):** LÃ  toÃ n bá»™ táº­p há»£p cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ  chÃºng ta quan tÃ¢m.
    * *VÃ­ dá»¥:* Táº¥t cáº£ cÃ¡c cá»­ tri á»Ÿ Viá»‡t Nam.
* **Máº«u (Sample):** LÃ  má»™t táº­p há»£p con Ä‘Æ°á»£c chá»n ra tá»« quáº§n thá»ƒ.
    * *VÃ­ dá»¥:* 1000 cá»­ tri Ä‘Æ°á»£c chá»n ngáº«u nhiÃªn Ä‘á»ƒ kháº£o sÃ¡t.

Trong thá»±c táº¿, chÃºng ta khÃ´ng bao giá» cÃ³ thá»ƒ thu tháº­p dá»¯ liá»‡u tá»« toÃ n bá»™ quáº§n thá»ƒ. Thay vÃ o Ä‘Ã³, chÃºng ta thu tháº­p dá»¯ liá»‡u tá»« má»™t máº«u vÃ  dÃ¹ng **Thá»‘ng kÃª Suy luáº­n** Ä‘á»ƒ rÃºt ra cÃ¡c káº¿t luáº­n vá» quáº§n thá»ƒ Ä‘Ã³.

---

### **2. Kiá»ƒm Ä‘á»‹nh Giáº£ thuyáº¿t (Hypothesis Testing) ğŸ§**

ÄÃ¢y lÃ  má»™t quy trÃ¬nh cÃ³ cáº¥u trÃºc Ä‘á»ƒ Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh vá» má»™t tuyÃªn bá»‘ (giáº£ thuyáº¿t) vá» quáº§n thá»ƒ, dá»±a trÃªn báº±ng chá»©ng tá»« dá»¯ liá»‡u máº«u.

Quy trÃ¬nh nÃ y luÃ´n báº¯t Ä‘áº§u vá»›i hai giáº£ thuyáº¿t Ä‘á»‘i láº­p nhau:

* **Giáº£ thuyáº¿t khÃ´ng (Null Hypothesis - $H_0$):**
    * LÃ  má»™t tuyÃªn bá»‘ máº·c Ä‘á»‹nh, thÆ°á»ng cho ráº±ng **"khÃ´ng cÃ³ gÃ¬ xáº£y ra"**, "khÃ´ng cÃ³ sá»± khÃ¡c biá»‡t", hoáº·c "khÃ´ng cÃ³ má»‘i liÃªn há»‡".
    * *VÃ­ dá»¥:* $H_0$: "KhÃ´ng cÃ³ sá»± khÃ¡c biá»‡t vá» chiá»u cao trung bÃ¬nh giá»¯a nam vÃ  ná»¯."

* **Giáº£ thuyáº¿t Ä‘á»‘i (Alternative Hypothesis - $H_1$ hoáº·c $H_a$):**
    * LÃ  tuyÃªn bá»‘ mÃ  chÃºng ta muá»‘n chá»©ng minh. NÃ³ phá»§ Ä‘á»‹nh láº¡i giáº£ thuyáº¿t khÃ´ng.
    * *VÃ­ dá»¥:* $H_1$: "CÃ³ sá»± khÃ¡c biá»‡t vá» chiá»u cao trung bÃ¬nh giá»¯a nam vÃ  ná»¯."

Má»¥c tiÃªu cá»§a chÃºng ta lÃ  thu tháº­p báº±ng chá»©ng tá»« máº«u Ä‘á»ƒ xem liá»‡u chÃºng ta cÃ³ Ä‘á»§ cÆ¡ sá»Ÿ Ä‘á»ƒ **bÃ¡c bá» giáº£ thuyáº¿t khÃ´ng ($H_0$)** hay khÃ´ng.

---

### **3. p-value lÃ  gÃ¬?**

**p-value** lÃ  má»™t trong nhá»¯ng khÃ¡i niá»‡m quan trá»ng nhÆ°ng cÅ©ng dá»… bá»‹ hiá»ƒu nháº§m nháº¥t trong thá»‘ng kÃª.

* **Äá»‹nh nghÄ©a:** **p-value** lÃ  xÃ¡c suáº¥t quan sÃ¡t Ä‘Æ°á»£c má»™t káº¿t quáº£ **Ã­t nháº¥t lÃ  khÃ¡c biá»‡t nhÆ°** káº¿t quáº£ thá»±c táº¿ trong máº«u cá»§a báº¡n, **giáº£ sá»­ ráº±ng giáº£ thuyáº¿t khÃ´ng ($H_0$) lÃ  Ä‘Ãºng**.

* **Diá»…n giáº£i má»™t cÃ¡ch Ä‘Æ¡n giáº£n:**
    * **p-value nhá» (thÆ°á»ng < 0.05):** Äiá»u nÃ y cÃ³ nghÄ©a lÃ : "Náº¿u giáº£ thuyáº¿t khÃ´ng lÃ  Ä‘Ãºng (vÃ­ dá»¥: thá»±c sá»± khÃ´ng cÃ³ sá»± khÃ¡c biá»‡t), thÃ¬ viá»‡c quan sÃ¡t Ä‘Æ°á»£c sá»± khÃ¡c biá»‡t lá»›n nhÆ° tháº¿ nÃ y trong máº«u cá»§a chÃºng ta lÃ  ráº¥t khÃ³ xáº£y ra (ráº¥t hiáº¿m)." Do Ä‘Ã³, chÃºng ta cÃ³ Ä‘á»§ báº±ng chá»©ng Ä‘á»ƒ **bÃ¡c bá» giáº£ thuyáº¿t khÃ´ng** vÃ  cháº¥p nháº­n giáº£ thuyáº¿t Ä‘á»‘i. Káº¿t quáº£ nÃ y Ä‘Æ°á»£c gá»i lÃ  **cÃ³ Ã½ nghÄ©a thá»‘ng kÃª (statistically significant)**.
    * **p-value lá»›n (thÆ°á»ng >= 0.05):** Äiá»u nÃ y cÃ³ nghÄ©a lÃ : "Náº¿u giáº£ thuyáº¿t khÃ´ng lÃ  Ä‘Ãºng, thÃ¬ sá»± khÃ¡c biá»‡t mÃ  chÃºng ta tháº¥y trong máº«u cÅ©ng khÃ´ng cÃ³ gÃ¬ láº¡, nÃ³ hoÃ n toÃ n cÃ³ thá»ƒ xáº£y ra do ngáº«u nhiÃªn." Do Ä‘Ã³, chÃºng ta **khÃ´ng Ä‘á»§ báº±ng chá»©ng Ä‘á»ƒ bÃ¡c bá» giáº£ thuyáº¿t khÃ´ng**.

---

### **4. VÃ­ dá»¥: Independent T-test**

**T-test** lÃ  má»™t loáº¡i kiá»ƒm Ä‘á»‹nh thá»‘ng kÃª dÃ¹ng Ä‘á»ƒ so sÃ¡nh giÃ¡ trá»‹ trung bÃ¬nh cá»§a hai nhÃ³m.

**BÃ i toÃ¡n:** ChÃºng ta muá»‘n biáº¿t liá»‡u giÃ¡ vÃ© (`Fare`) mÃ  hÃ nh khÃ¡ch nam vÃ  ná»¯ trÃªn tÃ u Titanic tráº£ cÃ³ thá»±c sá»± khÃ¡c nhau hay khÃ´ng, hay sá»± khÃ¡c biá»‡t chÃºng ta tháº¥y chá»‰ lÃ  do ngáº«u nhiÃªn.

* **Giáº£ thuyáº¿t khÃ´ng ($H_0$):** GiÃ¡ vÃ© trung bÃ¬nh cá»§a nam vÃ  ná»¯ lÃ  báº±ng nhau.
* **Giáº£ thuyáº¿t Ä‘á»‘i ($H_1$):** GiÃ¡ vÃ© trung bÃ¬nh cá»§a nam vÃ  ná»¯ lÃ  khÃ¡c nhau.

ChÃºng ta sáº½ dÃ¹ng `scipy.stats` Ä‘á»ƒ thá»±c hiá»‡n kiá»ƒm Ä‘á»‹nh nÃ y.

    import pandas as pd
    from scipy.stats import ttest_ind

    df = pd.read_csv('titanic.csv')

    # Táº¡o hai máº«u dá»¯ liá»‡u: giÃ¡ vÃ© cá»§a nam vÃ  giÃ¡ vÃ© cá»§a ná»¯
    # .dropna() Ä‘á»ƒ loáº¡i bá» cÃ¡c giÃ¡ trá»‹ thiáº¿u
    male_fares = df[df['Sex'] == 'male']['Fare'].dropna()
    female_fares = df[df['Sex'] == 'female']['Fare'].dropna()

    # Thá»±c hiá»‡n Independent T-test
    t_statistic, p_value = ttest_ind(male_fares, female_fares)

    print("--- Káº¿t quáº£ T-test cho GiÃ¡ vÃ© giá»¯a Nam vÃ  Ná»¯ ---")
    print(f"T-statistic: {t_statistic:.4f}")
    print(f"P-value: {p_value:.4f}")

    # Diá»…n giáº£i káº¿t quáº£
    alpha = 0.05 # Má»©c Ã½ nghÄ©a
    if p_value < alpha:
        print("\nKáº¿t luáº­n: P-value < 0.05, chÃºng ta bÃ¡c bá» giáº£ thuyáº¿t khÃ´ng.")
        print("=> CÃ³ sá»± khÃ¡c biá»‡t cÃ³ Ã½ nghÄ©a thá»‘ng kÃª vá» giÃ¡ vÃ© giá»¯a nam vÃ  ná»¯.")
    else:
        print("\nKáº¿t luáº­n: P-value >= 0.05, chÃºng ta khÃ´ng Ä‘á»§ báº±ng chá»©ng Ä‘á»ƒ bÃ¡c bá» giáº£ thuyáº¿t khÃ´ng.")
        print("=> KhÃ´ng cÃ³ sá»± khÃ¡c biá»‡t cÃ³ Ã½ nghÄ©a thá»‘ng kÃª vá» giÃ¡ vÃ© giá»¯a nam vÃ  ná»¯.")

**PhÃ¢n tÃ­ch Output:** Káº¿t quáº£ `p_value` sáº½ ráº¥t nhá» (thÆ°á»ng lÃ  nhá» hÆ¡n 0.0001). Äiá»u nÃ y cho phÃ©p chÃºng ta tá»± tin káº¿t luáº­n ráº±ng sá»± khÃ¡c biá»‡t vá» giÃ¡ vÃ© trung bÃ¬nh giá»¯a hai giá»›i khÃ´ng pháº£i lÃ  ngáº«u nhiÃªn.

---

### **âœï¸ BÃ i thá»±c hÃ nh:**

1.  **PhÃ¡t biá»ƒu Giáº£ thuyáº¿t:**
    * Báº¡n muá»‘n kiá»ƒm tra xem liá»‡u tuá»•i trung bÃ¬nh (`Age`) cá»§a nhá»¯ng ngÆ°á»i sá»‘ng sÃ³t (`Survived` = 1) cÃ³ khÃ¡c vá»›i tuá»•i trung bÃ¬nh cá»§a nhá»¯ng ngÆ°á»i tá»­ vong (`Survived` = 0) trÃªn tÃ u Titanic hay khÃ´ng.
    * HÃ£y phÃ¡t biá»ƒu **Giáº£ thuyáº¿t khÃ´ng ($H_0$)** vÃ  **Giáº£ thuyáº¿t Ä‘á»‘i ($H_1$)** cho bÃ i toÃ¡n nÃ y.

2.  **Thá»±c hiá»‡n T-test:**
    * Sá»­ dá»¥ng `pandas` Ä‘á»ƒ táº¡o ra hai máº«u dá»¯ liá»‡u: má»™t chá»©a tuá»•i cá»§a nhá»¯ng ngÆ°á»i sá»‘ng sÃ³t, má»™t chá»©a tuá»•i cá»§a nhá»¯ng ngÆ°á»i tá»­ vong. Äá»«ng quÃªn loáº¡i bá» cÃ¡c giÃ¡ trá»‹ tuá»•i bá»‹ thiáº¿u (`.dropna()`).
    * Sá»­ dá»¥ng hÃ m `ttest_ind` tá»« `scipy.stats` Ä‘á»ƒ thá»±c hiá»‡n kiá»ƒm Ä‘á»‹nh T-test trÃªn hai máº«u nÃ y.
    * In ra giÃ¡ trá»‹ `p-value`.

3.  **RÃºt ra Káº¿t luáº­n:**
    * Dá»±a trÃªn `p-value` báº¡n nháº­n Ä‘Æ°á»£c vÃ  má»©c Ã½ nghÄ©a `alpha = 0.05`, báº¡n sáº½ bÃ¡c bá» hay khÃ´ng bÃ¡c bá» giáº£ thuyáº¿t khÃ´ng?
    * Viáº¿t má»™t cÃ¢u káº¿t luáº­n Ä‘áº§y Ä‘á»§ vá» má»‘i quan há»‡ giá»¯a tuá»•i tÃ¡c vÃ  kháº£ nÄƒng sá»‘ng sÃ³t.